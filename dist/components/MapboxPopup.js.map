{"version":3,"file":"MapboxPopup.js","sources":["../../src/components/MapboxPopup.vue"],"sourcesContent":["<template>\n  <div>\n    <slot />\n  </div>\n</template>\n<script>\n  import { Popup, Point, LngLat } from 'mapbox-gl';\n  import bindProps from '../utils/bind-props';\n  import { bindEvents, unbindEvents } from '../utils/bind-events';\n  import { injectMap } from '../mixins/provide-inject-map';\n\n  /**\n   * Component's props definition, we need to declare it outside the component\n   * to be able to test the default values and the types.\n   * @see  https://docs.mapbox.com/mapbox-gl-js/api/#popup\n   * @type {Object}\n   */\n  const props = {\n    lngLat: {\n      type: [ LngLat, Array, Object ],\n      required: true,\n    },\n    closeButton: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnClick: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnMove: {\n      type: Boolean,\n      default: false,\n    },\n    anchor: {\n      type: String,\n      default: null,\n    },\n    offset: {\n      type: [ Number, Point, Array, Object ],\n      default: null,\n    },\n    className: {\n      type: String,\n      default: null,\n    },\n    maxWidth: {\n      type: String,\n      default: '240px',\n    },\n    /**\n     * Do not render the popup on the map.\n     * @type {Object}\n     */\n    renderless: {\n      type: Boolean,\n      default: false,\n      bind: false,\n    },\n  };\n\n  /**\n   * All Map events which will be mapped/bounded to the component\n   * @see  https://docs.mapbox.com/mapbox-gl-js/api/#popup.event:open\n   * @type {Array}\n   */\n  const events = [ 'open', 'close' ];\n\n  export default {\n    name: 'MapboxPopup',\n    mixins: [ injectMap() ],\n    props,\n    data() {\n      return {\n        popup: null,\n      };\n    },\n    computed: {\n      options() {\n        const { lngLat, ...options } = this.$props;\n        return options;\n      },\n    },\n    mounted() {\n      this.popup = new Popup(this.options)\n        .setLngLat(this.lngLat)\n        .setDOMContent(this.$el);\n\n      if (!this.renderless) {\n        this.popup.addTo(this.map);\n      }\n\n      bindProps(this, this.popup, props);\n      bindEvents(this, this.popup, events);\n\n      this.$emit('mb-open', this.popup);\n    },\n    destroyed() {\n      if (this.popup) {\n        unbindEvents(this, this.popup);\n        this.popup.remove();\n      }\n    },\n  };\n\n</script>\n"],"names":[],"mappings":";;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;;;;;;CApCA;AA4CA;AACA;AACA;AACA;AACA;;AACA,8BAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAA;;;AAlEA,2BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}